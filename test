æ˜ç™½äº†ï¼ä¸‹è½½ä¹‹åå¾—åˆ° 404 Not Foundï¼ˆä½ è¯´çš„ Alla404NonFund åº”è¯¥æ˜¯ GitLab è¿”å›çš„ 404 Not Found é¡µé¢ï¼‰ã€‚

è¿™è¯´æ˜ GitLab API è¯·æ±‚æˆåŠŸäº†ï¼Œä½†å®ƒæ‰¾ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ã€‚

å‡ºç° 404 Not Found çš„åŸå› é€šå¸¸åªæœ‰ ä¸‰ç§ï¼Œæˆ‘ä»¬é€ä¸€æ’æŸ¥ï¼š

â¸»

âœ… 1. é¡¹ç›®è·¯å¾„ä¸å¯¹ï¼ˆæœ€å¸¸è§ï¼‰

GitLab API é‡Œçš„é¡¹ç›®è·¯å¾„å¿…é¡»æ˜¯ URL Encode ä¹‹åçš„ namespace%2Fprojectã€‚
	â€¢	ä½ åŸå§‹ URL é‡Œæ˜¯ root/demo-projï¼Œå¿…é¡»å†™æˆ root%2Fdemo-proj
	â€¢	å¦‚æœä½ æ²¡è½¬ä¹‰ /ï¼ŒGitLab è®¤ä¸ºä½ è¦æ‰¾ root è¿™ä¸ªé¡¹ç›® â†’ æ‰¾ä¸åˆ° â†’ 404

ç¡®è®¤æ–¹æ³•

curl --header "PRIVATE-TOKEN: <token>" \
"https://AABBBCCCDDDEEFF.jp/api/v4/projects/root%2Fdemo-proj"

âœ… å¦‚æœèƒ½è¿”å› JSONï¼ˆé¡¹ç›®è¯¦æƒ…ï¼‰ï¼Œè¯´æ˜é¡¹ç›®è·¯å¾„æ²¡é—®é¢˜
âŒ å¦‚æœè¿˜æ˜¯ 404ï¼Œè¯´æ˜é¡¹ç›®è·¯å¾„æ²¡å†™å¯¹æˆ–æ²¡è½¬ä¹‰

â¸»

âœ… 2. åˆ†æ”¯åä¸å¯¹

?ref=BRANCHNAME é‡Œçš„åˆ†æ”¯åå¿…é¡»è·Ÿä»“åº“é‡Œå®Œå…¨ä¸€è‡´ã€‚
	â€¢	å¦‚æœä»“åº“é»˜è®¤åˆ†æ”¯æ˜¯ masterï¼Œä½†ä½ å†™ main â†’ 404
	â€¢	å¦‚æœåˆ†æ”¯æ˜¯ feature/demo-2025ï¼Œè¦å†™ feature%2Fdemo-2025 â†’ 404

ç¡®è®¤æ–¹æ³•

curl --header "PRIVATE-TOKEN: <token>" \
"https://AABBBCCCDDDEEFF.jp/api/v4/projects/root%2Fdemo-proj/repository/branches"

âœ… ä¼šåˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼ˆæ¯”å¦‚ main, master, developï¼‰
â†’ ä½ è¦ç”¨è·Ÿ /blob/<è¿™é‡Œ> ä¸€æ¨¡ä¸€æ ·çš„åˆ†æ”¯å

â¸»

âœ… 3. æ–‡ä»¶è·¯å¾„ä¸å¯¹æˆ–æ²¡è½¬ä¹‰

GitLab API é‡Œçš„æ–‡ä»¶è·¯å¾„å¿…é¡»æ˜¯ä»“åº“é‡Œçš„å®Œæ•´ç›¸å¯¹è·¯å¾„ï¼Œå¹¶ä¸” URL Encodeã€‚
	â€¢	docs/tutorial/readme.md â†’ docs%2Ftutorial%2Freadme.md âœ…
	â€¢	å¦‚æœæ¼æ‰ tutorial ç›®å½•æˆ–å¤§å°å†™ä¸ä¸€è‡´ â†’ 404
	â€¢	å¦‚æœä¸è½¬ä¹‰ / â†’ GitLab è®¤ä¸ºæ˜¯ç›®å½• â†’ 404

ç¡®è®¤æ–¹æ³•

curl --header "PRIVATE-TOKEN: <token>" \
"https://AABBBCCCDDDEEFF.jp/api/v4/projects/root%2Fdemo-proj/repository/tree?ref=main&path=docs/tutorial"

âœ… å¦‚æœèƒ½çœ‹åˆ° readme.md â†’ è·¯å¾„å¯¹
âŒ å¦‚æœæ²¡æœ‰ â†’ è·¯å¾„é”™äº†

â¸»

âœ… è§£å†³æ€è·¯

è¦é¿å… 404ï¼Œå¿…é¡»ç¡®è®¤è¿™ 3 ä¸ªå…³é”®ï¼š
	1.	âœ… é¡¹ç›®è·¯å¾„ï¼ˆroot/demo-proj â†’ root%2Fdemo-projï¼‰
	2.	âœ… åˆ†æ”¯åï¼ˆblob/ åé¢é‚£ä¸ªåå­—è¦ç²¾ç¡®ä¸€è‡´ï¼‰
	3.	âœ… æ–‡ä»¶è·¯å¾„ï¼ˆdemo/folder/file.md â†’ demo%2Ffolder%2Ffile.mdï¼Œä¸”å¤§å°å†™æ­£ç¡®ï¼‰

â¸»

âœ… å»ºè®®ä½ å…ˆè·‘ 3 ä¸ªæ’æŸ¥å‘½ä»¤

1ï¸âƒ£ ç¡®è®¤é¡¹ç›®è·¯å¾„å¯¹ä¸å¯¹

curl --header "PRIVATE-TOKEN: <token>" \
"https://AABBBCCCDDDEEFF.jp/api/v4/projects/root%2Fdemo-proj"

2ï¸âƒ£ ç¡®è®¤åˆ†æ”¯åˆ°åº•å«ä»€ä¹ˆ

curl --header "PRIVATE-TOKEN: <token>" \
"https://AABBBCCCDDDEEFF.jp/api/v4/projects/root%2Fdemo-proj/repository/branches"

3ï¸âƒ£ ç¡®è®¤æ–‡ä»¶è·¯å¾„åˆ°åº•å¯¹ä¸å¯¹

curl --header "PRIVATE-TOKEN: <token>" \
"https://AABBBCCCDDDEEFF.jp/api/v4/projects/root%2Fdemo-proj/repository/tree?ref=main&path=demo/folder"

	â€¢	âœ… å¦‚æœéƒ½èƒ½æ‰¾åˆ° â†’ å†æ‹¼ API ä¸‹è½½ URL å°±ä¸€å®šä¸ä¼š 404
	â€¢	âŒ å¦‚æœæœ‰ä¸€ä¸ªä¸å¯¹ â†’ ä¿®æ­£åå†è¯•

â¸»

âœ… ä½ æƒ³è®©æˆ‘æ€ä¹ˆå¸®ï¼Ÿ
	â€¢	è¦ä¸è¦æˆ‘å…ˆç»™ä½ æ’æŸ¥å‘½ä»¤ï¼ˆä¸€æ­¥æ­¥ç¡®è®¤é¡¹ç›®ã€åˆ†æ”¯ã€è·¯å¾„ï¼‰ï¼Œå¸®ä½ æ‰¾å‡ºåˆ°åº•å“ªä¸€æ­¥é”™äº†ï¼Ÿ
	â€¢	è¿˜æ˜¯ç›´æ¥å¸®ä½ æ‹¿åŸå§‹ URL è§£æå‡ºæ­£ç¡®çš„é¡¹ç›®è·¯å¾„ã€åˆ†æ”¯ã€æ–‡ä»¶è·¯å¾„ï¼Œå¹¶ç”Ÿæˆæœ€ç»ˆ curl å‘½ä»¤ï¼Ÿ

ğŸ‘‰ ä½ è¦ä¸è¦å…ˆè·‘ç¬¬ 1 æ­¥ï¼ˆç¡®è®¤é¡¹ç›®è·¯å¾„ï¼‰ï¼Œçœ‹èƒ½ä¸èƒ½è¿”å› JSONï¼Ÿ







import urllib.parse, os

ACCESS_TOKEN = "glpat-ä½ çš„TOKEN"

raw_url = input("è¯·è¾“å…¥å®¢æˆ·ç»™çš„ /blob/ URL: ").strip()

parts = raw_url.split("/")
domain = parts[2]
proj_path = "%2F".join(parts[3:parts.index("-")])
branch = parts[parts.index("blob") + 1]
file_path = "%2F".join(parts[parts.index("blob") + 2:])
filename = raw_url.split("/")[-1]

api_url = f"https://{domain}/api/v4/projects/{proj_path}/repository/files/{file_path}/raw?ref={branch}"

print(f"âœ… è½¬æ¢å®Œæˆ: {api_url}")
os.system(f"curl --header \"PRIVATE-TOKEN: {ACCESS_TOKEN}\" -O \"{api_url}\"")




curl --header "PRIVATE-TOKEN: <ä½ çš„Token>" ^
     -O "https://AABBBCCCDDDEEFF.jp/api/v4/projects/root%2Fdemo-proj/repository/files/demo%2Ftutorial%2Fguide.md/raw?ref=main"



æ˜ç™½äº†ï¼ä½ çš„å…¬å¸/å®¢æˆ·çš„ GitLab åŸŸåæ˜¯ç±»ä¼¼ï¼š

https://devops.xxx.jp

ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ—¥æœ¬åç¼€ .jp çš„ å†…éƒ¨è‡ªå»º GitLabï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ç”¨è¿™ä¸ªåŸŸåæ¥è°ƒç”¨ APIï¼Œè€Œä¸èƒ½ç”¨ https://gitlab.comã€‚

âœ… å¥½æ¶ˆæ¯æ˜¯ï¼šGitLab API åœ¨ .jp åŸŸåä¸‹ä¸€æ ·èƒ½ç”¨ï¼Œåªè¦ä½ æŠŠåŸŸåæ›¿æ¢æ­£ç¡®ã€‚

â¸»

âœ… ç¬¬ä¸€æ­¥ï¼šå…ˆéªŒè¯ Token æ˜¯å¦å¯¹ .jp åŸŸåæœ‰æ•ˆ

è¯·åœ¨å‘½ä»¤è¡Œé‡Œè¿è¡Œï¼ˆæŠŠ <ä½ çš„Token> æ¢æˆä½ çš„çœŸå® tokenï¼‰ï¼š

curl --header "PRIVATE-TOKEN: <ä½ çš„Token>" https://devops.xxx.jp/api/v4/user

å¯èƒ½çš„ç»“æœï¼š
	â€¢	âœ… å¦‚æœè¿”å› JSONï¼Œç±»ä¼¼ï¼š

{"id":123,"username":"yourname","email":"xxx@company.jp"}

è¯´æ˜ï¼š
	â€¢	åŸŸåæ­£ç¡®
	â€¢	Token æœ‰æ•ˆ
	â€¢	æƒé™å¤Ÿ

	â€¢	âŒ å¦‚æœè¿”å› HTMLï¼ˆå¸¦ <html> <body> ç™»å½•é¡µï¼‰ â†’
	â€¢	å¯èƒ½ Token æƒé™ä¸è¶³
	â€¢	å¯èƒ½ Token è¾“å…¥é”™
	â€¢	ä¹Ÿå¯èƒ½åŸŸåæ‹¼é”™

â¸»

âœ… ç¬¬äºŒæ­¥ï¼šç¡®å®š GitLab API ä¸‹è½½æ–‡ä»¶çš„å®Œæ•´åœ°å€

å‡è®¾ä½ çš„ GitLab é¡¹ç›®æ˜¯ï¼š
	â€¢	å‘½åç©ºé—´/é¡¹ç›®ï¼šmyteam/myrepo
	â€¢	æ–‡ä»¶è·¯å¾„ï¼šdocs/readme.md
	â€¢	åˆ†æ”¯åï¼šmain

é‚£ä¹ˆæ­£ç¡®çš„ API ä¸‹è½½ URL æ˜¯ï¼š

https://devops.xxx.jp/api/v4/projects/myteam%2Fmyrepo/repository/files/docs%2Freadme.md/raw?ref=main

ç„¶åä½ å¯ä»¥ç›´æ¥ç”¨ curl ä¸‹è½½ï¼š

curl --header "PRIVATE-TOKEN: <ä½ çš„Token>" \
     -O "https://devops.xxx.jp/api/v4/projects/myteam%2Fmyrepo/repository/files/docs%2Freadme.md/raw?ref=main"

âœ… è¿™æ ·å°±èƒ½æ‹¿åˆ°çœŸæ­£çš„ Markdown æ–‡ä»¶ï¼Œè€Œä¸ä¼šæ˜¯ HTML ç™»å½•é¡µé¢ã€‚

â¸»

âœ… ç¬¬ä¸‰æ­¥ï¼šPython è„šæœ¬é€‚é… .jp åŸŸå

æŠŠä¹‹å‰çš„è„šæœ¬é‡Œçš„ GITLAB_URL æ”¹æˆ https://devops.xxx.jp å°±è¡Œï¼Œæ¯”å¦‚ï¼š

GITLAB_URL = "https://devops.xxx.jp"   # âš ï¸ æ”¹æˆä½ ä»¬çš„åŸŸå
ACCESS_TOKEN = "glpat-xxxxxxxxxxxxxxxx"
PROJECT_PATH = "myteam/myrepo"
FILE_PATH = "docs/readme.md"
BRANCH = "main"

è¿è¡Œåå®ƒå°±ä¼šè®¿é—®ï¼š

https://devops.xxx.jp/api/v4/projects/myteam%2Fmyrepo/repository/files/docs%2Freadme.md/raw?ref=main

âœ… è¿™æ ·æ‰èƒ½ä¸‹è½½åˆ°çœŸæ­£çš„æ–‡ä»¶

â¸»

âœ… ä¸‹ä¸€æ­¥æ€ä¹ˆåšï¼Ÿ

1ï¸âƒ£ å…ˆéªŒè¯ Token æ˜¯å¦æœ‰æ•ˆ

curl --header "PRIVATE-TOKEN: <ä½ çš„Token>" https://devops.xxx.jp/api/v4/user

2ï¸âƒ£ å¦‚æœèƒ½è¿”å› JSON âœ… â†’ æˆ‘å¸®ä½ å†™å¥½æœ€ç»ˆä¸‹è½½å‘½ä»¤å’Œ Python ä»£ç 
3ï¸âƒ£ å¦‚æœè¿”å› HTML âŒ â†’ è¯´æ˜ Token æƒé™ä¸è¶³æˆ–åŸŸåä¸å¯¹ï¼Œéœ€è¦ä¿®æ­£

â¸»

ğŸ‘‰ ä½ è¦ä¸è¦ç°åœ¨å°±å…ˆè·‘ç¬¬ 1 æ­¥ curl å‘½ä»¤ï¼Œçœ‹èƒ½ä¸èƒ½è¿”å› JSONï¼Ÿ
å¦‚æœå¯ä»¥ï¼Œæˆ‘ç›´æ¥ç»™ä½ å®Œæ•´ä¸‹è½½è„šæœ¬ã€‚

è¦ä¸è¦æˆ‘ç»™ä½ ä¸€ä¸ª åªè¾“å…¥ URL+Token è‡ªåŠ¨å®ŒæˆéªŒè¯å’Œä¸‹è½½çš„ç®€æ˜“ç‰ˆè„šæœ¬ï¼Ÿ



import requests
import urllib.parse

# === é…ç½®åŒº ===
GITLAB_URL = "https://gitlab.com"   # å¦‚æœæ˜¯è‡ªå»ºGitLabï¼Œæ”¹æˆè‡ªå·±çš„åŸŸå
ACCESS_TOKEN = "YOUR_TOKEN_HERE"   # ä½ çš„GitLab Personal Access Token
PROJECT_PATH = "group/project"     # é¡¹ç›®çš„å‘½åç©ºé—´è·¯å¾„ï¼Œä¾‹å¦‚ myteam/myrepo
FILE_PATH = "docs/example.md"      # ä»“åº“é‡Œçš„æ–‡ä»¶è·¯å¾„
BRANCH = "main"                    # åˆ†æ”¯åï¼Œæ¯”å¦‚ main / master

def check_token():
    """æ£€æŸ¥ GitLab Token æ˜¯å¦æœ‰æ•ˆ"""
    url = f"{GITLAB_URL}/api/v4/user"
    headers = {"PRIVATE-TOKEN": ACCESS_TOKEN}
    print(f"ğŸ” æ­£åœ¨æ£€æŸ¥ Token æ˜¯å¦æœ‰æ•ˆ...")

    resp = requests.get(url, headers=headers)
    
    if resp.status_code == 200:
        try:
            user_info = resp.json()
            print(f"âœ… Token æœ‰æ•ˆï¼Œç”¨æˆ·ï¼š{user_info.get('username')} (ID {user_info.get('id')})")
            return True
        except Exception as e:
            print(f"âš ï¸ Token å“åº”ä¸æ˜¯æœ‰æ•ˆ JSONï¼Œå¯èƒ½æ˜¯ GitLab HTML é¡µé¢")
            print(resp.text[:200])  # æ‰“å°å‰200å­—ç¬¦
            return False
    else:
        print(f"âŒ Token æ— æ•ˆæˆ–æ— æƒé™ï¼ŒçŠ¶æ€ç  {resp.status_code}")
        print(resp.text)
        return False

def download_file():
    """ç”¨ API ä¸‹è½½æ–‡ä»¶"""
    encoded_project = urllib.parse.quote(PROJECT_PATH, safe="")
    encoded_file = urllib.parse.quote(FILE_PATH, safe="")
    api_url = f"{GITLAB_URL}/api/v4/projects/{encoded_project}/repository/files/{encoded_file}/raw?ref={BRANCH}"

    headers = {"PRIVATE-TOKEN": ACCESS_TOKEN}
    print(f"ğŸ” é€šè¿‡ API ä¸‹è½½æ–‡ä»¶ï¼š{FILE_PATH}")
    resp = requests.get(api_url, headers=headers)

    if resp.status_code == 200:
        filename = FILE_PATH.split("/")[-1]
        with open(filename, "wb") as f:
            f.write(resp.content)
        print(f"âœ… æ–‡ä»¶ä¸‹è½½æˆåŠŸï¼š{filename}")
    else:
        print(f"âŒ ä¸‹è½½å¤±è´¥ï¼ŒçŠ¶æ€ç  {resp.status_code}")
        print(resp.text)

if __name__ == "__main__":
    if check_token():
        download_file()
    else:
        print("âš ï¸ è¯·æ£€æŸ¥ Token æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ç¡®è®¤å·²å‹¾é€‰ read_repository æƒé™ã€‚")


import requests
import urllib.parse

# === é…ç½®åŒº ===
GITLAB_URL = "https://gitlab.com"   # å¦‚æœæ˜¯è‡ªå»ºGitLabï¼Œæ”¹æˆè‡ªå·±çš„åŸŸå
ACCESS_TOKEN = "YOUR_TOKEN_HERE"   # ä½ çš„GitLab Personal Access Token
PROJECT_PATH = "group/project"     # é¡¹ç›®çš„å‘½åç©ºé—´è·¯å¾„ï¼Œä¾‹å¦‚ myteam/myrepo
FILE_PATH = "docs/example.md"      # ä»“åº“é‡Œçš„æ–‡ä»¶è·¯å¾„
BRANCH = "main"                    # åˆ†æ”¯åï¼Œæ¯”å¦‚ main / master

# === Step 1: æ£€æŸ¥ Token æ˜¯å¦æœ‰æ•ˆ ===
def check_token():
    url = f"{GITLAB_URL}/api/v4/user"
    headers = {"PRIVATE-TOKEN": ACCESS_TOKEN}
    print(f"ğŸ” æ£€æŸ¥ Token æ˜¯å¦æœ‰æ•ˆ...")
    resp = requests.get(url, headers=headers)
    if resp.status_code == 200:
        user_info = resp.json()
        print(f"âœ… Token æœ‰æ•ˆï¼Œç”¨æˆ·ï¼š{user_info['username']} (ID {user_info['id']})")
        return True
    else:
        print(f"âŒ Token æ— æ•ˆæˆ–æ— æƒé™ï¼ŒçŠ¶æ€ç  {resp.status_code}")
        print(resp.text)
        return False

# === Step 2: ç”¨ API ä¸‹è½½æ–‡ä»¶ ===
def download_file():
    # GitLab API ä¸‹è½½åœ°å€éœ€è¦ URL Encode
    encoded_project = urllib.parse.quote(PROJECT_PATH, safe="")
    encoded_file = urllib.parse.quote(FILE_PATH, safe="")
    api_url = f"{GITLAB_URL}/api/v4/projects/{encoded_project}/repository/files/{encoded_file}/raw?ref={BRANCH}"

    headers = {"PRIVATE-TOKEN": ACCESS_TOKEN}
    print(f"ğŸ” é€šè¿‡ API ä¸‹è½½æ–‡ä»¶ï¼š{FILE_PATH}")
    resp = requests.get(api_url, headers=headers)

    if resp.status_code == 200:
        filename = FILE_PATH.split("/")[-1]
        with open(filename, "wb") as f:
            f.write(resp.content)
        print(f"âœ… æ–‡ä»¶ä¸‹è½½æˆåŠŸï¼š{filename}")
    else:
        print(f"âŒ ä¸‹è½½å¤±è´¥ï¼ŒçŠ¶æ€ç  {resp.status_code}")
        print(resp.text)

if __name__ == "__main__":
    if check_token():
        download_file()
    else:
        print("âš ï¸ è¯·æ£€æŸ¥ Token æ˜¯å¦æ­£ç¡®ï¼Œå¹¶ç¡®è®¤å·²å‹¾é€‰ read_repository æƒé™ã€‚")

æ˜ç™½äº†ï¼ä½ å·²ç»åœ¨æµè§ˆå™¨ç‚¹äº† â€œRawâ€ æŒ‰é’® â†’ å³é”®å¤åˆ¶é“¾æ¥ â†’ ç”¨ curl ä¸‹è½½ï¼Œä½†ç»“æœè¿˜æ˜¯ HTMLï¼ˆæç¤ºé‡å®šå‘æˆ–ç™»å½•ï¼‰ï¼Œè¯´æ˜ï¼š

âœ… è¿™ä¸ªæ–‡ä»¶åœ¨ä¸€ä¸ªç§æœ‰é¡¹ç›®é‡Œ
âœ… GitLabå³ä½¿æ˜¯Rawé“¾æ¥ï¼Œä¹Ÿéœ€è¦ä½ å…ˆè®¤è¯
âœ… ä½ çš„ PRIVATE-TOKEN ç›®å‰æ²¡è¢«æ­£ç¡®è¯†åˆ«æˆ–æƒé™ä¸å¤Ÿ

â¸»

âœ… ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ

GitLab å¯¹ç§æœ‰åº“çš„ä¿æŠ¤æ˜¯ï¼š
	â€¢	æµè§ˆå™¨é‡Œä½ å·²ç»ç™»å½•ï¼Œæ‰€ä»¥èƒ½ç›´æ¥çœ‹åˆ° Raw
	â€¢	ä½† curl ä¸æ˜¯ç™»å½•çŠ¶æ€ï¼Œéœ€è¦å¸¦ æ­£ç¡®çš„ Token
	â€¢	å¦‚æœ Token æ— æ•ˆ / æƒé™ä¸å¤Ÿï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªç™»å½•é¡µé¢ (HTML + sign_in)

â¸»

âœ… æ­£ç¡®ä¸‹è½½ç§æœ‰æ–‡ä»¶çš„æ–¹æ³•

å¯¹ç§æœ‰åº“ï¼Œå»ºè®®ç›´æ¥ç”¨ GitLab APIï¼Œè€Œä¸æ˜¯æ™®é€š Raw é“¾æ¥ã€‚

1ï¸âƒ£ API ä¸‹è½½é“¾æ¥æ ¼å¼

https://gitlab.com/api/v4/projects/<URL_ENCODED_PROJECT_PATH>/repository/files/<URL_ENCODED_FILE_PATH>/raw?ref=<BRANCH>

ç¤ºä¾‹ï¼š

https://gitlab.com/api/v4/projects/mygroup%2Fmyrepo/repository/files/docs%2Fexample.md/raw?ref=main

ç„¶åï¼š

curl --header "PRIVATE-TOKEN: <your_token>" -O "https://gitlab.com/api/v4/projects/mygroup%2Fmyrepo/repository/files/docs%2Fexample.md/raw?ref=main"

âœ… è¿™æ · 100% ä¼šå¾—åˆ°çœŸæ­£çš„ Markdown æ–‡ä»¶ã€‚

â¸»

2ï¸âƒ£ ä½†ä½ ç›®å‰åªæœ‰ Raw æŒ‰é’®çš„ URL

é‚£æˆ‘ä»¬å¯ä»¥å…ˆç”¨åŒä¸€ä¸ª Token æµ‹è¯•æƒé™æ˜¯å¦æœ‰æ•ˆï¼š

curl --header "PRIVATE-TOKEN: <your_token>" -I "https://gitlab.com"

å¦‚æœè¿”å› HTTP/2 200 â†’ è¯´æ˜ Token æœ‰æ•ˆ
å¦‚æœè¿”å› 401 Unauthorized â†’ Token æ— æ•ˆæˆ–è€…æ²¡æƒé™

â¸»

âœ… ä½ çš„æƒ…å†µå¾ˆå¯èƒ½æ˜¯ï¼š
	â€¢	Token è¿˜æ²¡æ­£ç¡®å¡«å…¥ï¼ˆå¯èƒ½è¿˜æ˜¯ YOUR_TOKEN æ–‡å­—æ²¡æ¢ï¼‰
	â€¢	Token æƒé™ä¸å¤Ÿï¼ˆéœ€è¦ read_repositoryï¼‰
	â€¢	Token å¯¹åº”çš„æ˜¯é”™è¯¯è´¦å·ï¼ˆæ²¡æƒé™è®¿é—®ç§æœ‰é¡¹ç›®ï¼‰
	â€¢	GitLab æ˜¯è‡ªå»ºçš„ï¼Œå¿…é¡»ç”¨å®Œæ•´åŸŸååŒ¹é…

â¸»

âœ… ä½ ç°åœ¨å¯ä»¥è¿™æ ·æ’æŸ¥
	1.	ç¡®è®¤ Token æ­£ç¡®å¹¶èƒ½ç”¨

curl --header "PRIVATE-TOKEN: <your_token>" "https://gitlab.com/api/v4/user"

âœ… å¦‚æœæ­£å¸¸ï¼Œåº”è¯¥è¿”å›ä½ çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆJSON æ ¼å¼ï¼‰
âŒ å¦‚æœæŠ¥ 401 â†’ Token æœ‰é—®é¢˜
	2.	ç¡®è®¤ Token æœ‰ read_repository æƒé™
	â€¢	GitLab â†’ Settings â†’ Access Tokens â†’ å‹¾é€‰ read_api & read_repository
	3.	ç¡®è®¤é“¾æ¥æ˜¯å¦çœŸæ˜¯ Raw
	â€¢	æµè§ˆå™¨ç‚¹ Raw â†’ å¤åˆ¶é“¾æ¥ â†’ å†æ‰“å¼€æ— ç—•çª—å£
	â€¢	å¦‚æœæ— ç—•é‡Œæ‰“ä¸å¼€ï¼Œè¯´æ˜å®ƒæ˜¯ç§æœ‰çš„ï¼Œå¿…é¡»ç”¨ API

â¸»

âœ… æœ€ç»ˆå»ºè®®

å› ä¸ºæ˜¯ç§æœ‰é¡¹ç›®ï¼Œæœ€ä¿é™©çš„æ–¹æ³•å°±æ˜¯èµ° APIï¼Œè€Œä¸æ˜¯ Raw æŒ‰é’®çš„é“¾æ¥ã€‚
è¦ç”¨ APIï¼Œæˆ‘éœ€è¦çŸ¥é“ï¼š
	â€¢	é¡¹ç›®çš„è·¯å¾„ï¼ˆä¾‹å¦‚ mygroup/myrepoï¼‰
	â€¢	æ–‡ä»¶çš„è·¯å¾„ï¼ˆä¾‹å¦‚ docs/example.mdï¼‰
	â€¢	åˆ†æ”¯åï¼ˆä¾‹å¦‚ mainï¼‰

æˆ‘å°±èƒ½å¸®ä½ æ‹¼å‡ºæ­£ç¡®çš„ API ä¸‹è½½å‘½ä»¤ã€‚

â¸»

è¦ä¸è¦æˆ‘å…ˆç»™ä½ ä¸€ä¸ª è‡ªåŠ¨æ£€æµ‹ Token + API ä¸‹è½½çš„è„šæœ¬ï¼Œä¸€æ­¥å¸®ä½ æå®šï¼Ÿ
è¿˜æ˜¯å…ˆå¸®ä½  æµ‹è¯• Token æ˜¯å¦æœ‰æ•ˆï¼Ÿ

ğŸ‘‰ è¦ä¸è¦å…ˆæµ‹è¯• Tokenï¼Ÿ



curl --header "PRIVATE-TOKEN: YOUR_TOKEN" -O "THE_LINK_YOU_GOT"






import requests
import os

# === Configuration ===
GITLAB_URL = "https://gitlab.com"  # Replace with your GitLab server URL if it's self-hosted
PROJECT_ID = "12345678"            # Replace with your GitLab project ID
FILE_PATH = "docs/example.md"      # Path to the file inside the repo
REF = "main"                       # Branch name or commit hash
ACCESS_TOKEN = "your_personal_access_token"

# Output file name
OUTPUT_FILE = os.path.basename(FILE_PATH)

# === GitLab API endpoint ===
API_URL = f"{GITLAB_URL}/api/v4/projects/{PROJECT_ID}/repository/files/{requests.utils.quote(FILE_PATH, safe='')}/raw?ref={REF}"

# === Send request ===
headers = {"PRIVATE-TOKEN": ACCESS_TOKEN}
response = requests.get(API_URL, headers=headers)

if response.status_code == 200:
    with open(OUTPUT_FILE, "wb") as f:
        f.write(response.content)
    print(f"âœ… File downloaded successfully: {OUTPUT_FILE}")
else:
    print(f"âŒ Failed to download file. Status: {response.status_code}")
    print(response.text)








import psycopg2

# æ¥ç¶šæƒ…å ±ï¼ˆè‡ªåˆ†ã®ç’°å¢ƒã«åˆã‚ã›ã¦ä¿®æ­£ï¼‰
host = "localhost"
port = 5432
dbname = "your_database"
user = "your_username"
password = "your_password"
schema_name = "public"
table_name = "postal_grade_data"

try:
    # PostgreSQL ã«æ¥ç¶š
    conn = psycopg2.connect(
        host=host,
        port=port,
        dbname=dbname,
        user=user,
        password=password
    )
    cursor = conn.cursor()

    # 1. è¡Œæ•°ï¼ˆãƒ¬ã‚³ãƒ¼ãƒ‰æ•°ï¼‰ã‚’å–å¾—
    count_sql = f"SELECT COUNT(*) FROM {schema_name}.{table_name};"
    cursor.execute(count_sql)
    row_count = cursor.fetchone()[0]
    print(f"ãƒ¬ã‚³ãƒ¼ãƒ‰ä»¶æ•°ï¼š{row_count} ä»¶")

    # 2. ãƒ†ãƒ¼ãƒ–ãƒ«ã‚µã‚¤ã‚ºã‚’å–å¾—ï¼ˆäººé–“ãŒèª­ã‚ã‚‹å½¢å¼ï¼‰
    size_sql = f"""
        SELECT
            pg_size_pretty(pg_total_relation_size('{schema_name}.{table_name}')) AS total_size,
            pg_size_pretty(pg_relation_size('{schema_name}.{table_name}')) AS table_size,
            pg_size_pretty(pg_indexes_size('{schema_name}.{table_name}')) AS index_size;
    """
    cursor.execute(size_sql)
    size_result = cursor.fetchone()

    print(f"åˆè¨ˆã‚µã‚¤ã‚º      ï¼š{size_result[0]}")
    print(f"ãƒ†ãƒ¼ãƒ–ãƒ«æœ¬ä½“    ï¼š{size_result[1]}")
    print(f"ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹éƒ¨åˆ†ï¼š{size_result[2]}")

except Exception as e:
    print("ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸï¼š", e)

finally:
    if 'conn' in locals() and conn:
        cursor.close()
        conn.close()
        print("ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚’çµ‚äº†ã—ã¾ã—ãŸã€‚")



import pandas as pd
import psycopg2

conn = psycopg2.connect(
    dbname="ä½ çš„æ•°æ®åº“å",
    user="ä½ çš„ç”¨æˆ·å",
    password="ä½ çš„å¯†ç ",
    host="ä½ çš„æ•°æ®åº“åœ°å€",
    port="5432"
)

df = pd.read_sql("SELECT * FROM coooo.aaatable;", conn)
print(df.head())

conn.close()





import psycopg2

# æ›¿æ¢ä¸ºä½ çš„æ•°æ®åº“ä¿¡æ¯
conn = psycopg2.connect(
    dbname="ä½ çš„æ•°æ®åº“å",
    user="ä½ çš„ç”¨æˆ·å",
    password="ä½ çš„å¯†ç ",
    host="ä½ çš„æ•°æ®åº“åœ°å€",  # å¦‚æœæ˜¯æœ¬æœºå¯ä»¥å†™ localhost
    port="5432"  # PostgreSQL é»˜è®¤ç«¯å£
)

# åˆ›å»ºæ¸¸æ ‡
cur = conn.cursor()

# æ‰§è¡Œ SQL æŸ¥è¯¢
cur.execute("SELECT * FROM your_table_name;")

# è·å–æ‰€æœ‰ç»“æœ
rows = cur.fetchall()

# æ‰“å°ç»“æœ
for row in rows:
    print(row)

# å…³é—­è¿æ¥
cur.close()
conn.close()







import pandas as pd
from boxsdk import JWTAuth, Client
import io

# Step 1: ä½ çš„ DataFrame
df = pd.DataFrame({
    'Name': ['Alice', 'Bob'],
    'Age': [25, 30]
})

# Step 2: è®¤è¯ Box APIï¼ˆç”¨ JWT é…ç½®ï¼‰
auth = JWTAuth.from_settings_file('your_jwt_config.json')
client = Client(auth)

# Step 3: åˆ›å»º Excel æ–‡ä»¶åˆ°å†…å­˜ä¸­
excel_buffer = io.BytesIO()
df.to_excel(excel_buffer, index=False, engine='openpyxl')
excel_buffer.seek(0)

# Step 4: é€‰æ‹© Box ä¸­çš„ç›®æ ‡æ–‡ä»¶å¤¹ï¼ˆå¦‚æ ¹ç›®å½•ï¼‰
folder_id = '0'  # æ ¹ç›®å½•ï¼›ä½ ä¹Ÿå¯ä»¥ç”¨å…¶ä»–å…·ä½“æ–‡ä»¶å¤¹çš„ ID

# Step 5: ä¸Šä¼ ä¸ºæ–‡ä»¶
file_name = 'output.xlsx'
uploaded_file = client.folder(folder_id).upload_stream(excel_buffer, file_name)

print(f"æ–‡ä»¶å·²ä¸Šä¼ åˆ° Boxï¼š{uploaded_file.name} (ID: {uploaded_file.id})")





import subprocess
import base64

# Tableau Server ä¿¡æ¯
TABLEAU_SERVER = "https://your-tableau-server.com"
USERNAME = "your_username"
PASSWORD = "your_password"
VIEW_URL = "views/your_dashboard"  # ä½ çš„ä»ªè¡¨æ¿è§†å›¾è·¯å¾„
OUTPUT_FILE = "dashboard.png"

# ä½¿ç”¨ tabcmd ç™»å½• Tableau Server
login_command = [
    "tabcmd", "login",
    "--server", TABLEAU_SERVER,
    "--username", USERNAME,
    "--password", PASSWORD
]

# è¿è¡Œç™»å½•å‘½ä»¤
subprocess.run(login_command, check=True)

# ä½¿ç”¨ tabcmd è·å–ä»ªè¡¨æ¿çš„å›¾ç‰‡
get_image_command = [
    "tabcmd", "get",
    f"{TABLEAU_SERVER}/{VIEW_URL}.png",
    "-o", OUTPUT_FILE
]

# è¿è¡Œä¸‹è½½å‘½ä»¤
subprocess.run(get_image_command, check=True)

# è¯»å–å›¾ç‰‡å¹¶è½¬æ¢ä¸º Base64 ç¼–ç å­—ç¬¦ä¸²
with open(OUTPUT_FILE, "rb") as img_file:
    image_base64 = base64.b64encode(img_file.read()).decode('utf-8')

print(f"ä»ªè¡¨æ¿å›¾ç‰‡çš„ Base64 ç¼–ç å­—ç¬¦ä¸²ä¸ºï¼š{image_base64}")

# ä½¿ç”¨ tabcmd é€€å‡ºç™»å½•
logout_command = ["tabcmd", "logout"]
subprocess.run(logout_command, check=True)
